<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../">
  <title data-ice="title">src/constants.js | Public API | Meeks-PRF-js</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<meta name="description" content="Tabulate Meek&apos;s method using prfound.org reference rule, with extensions"><meta property="twitter:card" content="summary"><meta property="twitter:title" content="Public API | Meeks-PRF-js"><meta property="twitter:description" content="Tabulate Meek&apos;s method using prfound.org reference rule, with extensions"></head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/ballot.js~Ballot.html">Ballot</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/decimal9.js~Decimal9.html">Decimal9</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/decimal9.js~Decimal9Error.html">Decimal9Error</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/decimal9.js~Decimal9Total.html">Decimal9Total</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/errors.js~MeekImplementationError.html">MeekImplementationError</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/errors.js~MeekValueError.html">MeekValueError</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/meek.js~Tabulation.html">Tabulation</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/progress.js~Progress.html">Progress</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/results.js~Results.html">Results</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/status.js~Status.html">Status</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/util_basic.js~UtilBaseError.html">UtilBaseError</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/util_basic.js~UtilBasicFunctions.html">UtilBasicFunctions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/util_basic.js~UtilValueError.html">UtilValueError</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/validate.js~Validator.html">Validator</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/with_json.js~WithJson.html">WithJson</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-tabulate">tabulate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-K">K</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-UBF">UBF</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/constants.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">/**
 * @copyright 2016-2019 David Cary;
 * @license Apache-2.0
 *
 * @module K
 * @summary Centrally defined constants for an Meek tabulation
 */

import {Decimal9} from &apos;./decimal9.js&apos;;

/** Major, minor, patch version numbers using semantic versioning */
const _versionNumbers = [0, 9, 1];
/** Major, minor, patch version as a string */
const _versionString = _versionNumbers.join(&apos;.&apos;);

/** The ranking codes other than candidate identifiers */
const _ranking_code = Object.freeze({
  undervote: &apos;&apos;,
  overvote: &apos;#&apos;,
});

/** Labels and identifiers for tabulation categories other than
 * candidate identifiers */
const _label = Object.freeze({
  totalCandidateVotes: &apos;:Votes for candidates&apos;,
  overvotes: &apos;:Overvotes&apos;,
  abstentions: &apos;:Abstentions&apos;,
  otherExhausted: &apos;:Other exhausted&apos;,
  totalVotes: &apos;:Total votes&apos;,
  protectedQuota: &apos;:Protected quota&apos;,
  quotaVotes: &apos;:Quota votes&apos;,
  quota: &apos;:Quota&apos;,
  totalSurplus: &apos;:Total surplus&apos;,
  nbrIterations: &apos;:Iterations&apos;,
});

/** This class represents a node in a tree structured options constant
 * Each node facilitates identifying and validating values at the next
 * lower level within the tree. */
class _Option {
  constructor(jsId, value, options=[], toUpper=false) {
    this._jsId = String(jsId);
    this._value = value;
    this._value_set = new Set();
    this._valueToJsId = {}
    options.forEach(option =&gt; {
      this[option._jsId] = option._value_set.size == 0 ?
            option._value : option;
      this._value_set.add(option._value);
      this._valueToJsId[option._value] = option._jsId;
    });
    Object.freeze(this);
  }
}

/** The tree-structured options constant. */
const _options = new _Option(&apos;option&apos;, &apos;options&apos;, [
  new _Option(&apos;alternativeDefeats&apos;, &apos;alternative_defeats&apos;, [
    new _Option(&apos;yes&apos;, &apos;Y&apos;),
    new _Option(&apos;never&apos;, &apos;N&apos;),
  ]),
  new _Option(&apos;typeOfAltDefs&apos;, &apos;type_of_altdefs&apos;, [
    new _Option(&apos;perRefRule&apos;, &apos;per_reference_rule&apos;),
    new _Option(&apos;beforeSingleDefeats&apos;, &apos;before_single_defeats&apos;),
    new _Option(&apos;ifNoNewElecteds&apos;, &apos;if_no_new_electeds&apos;),
  ]),
  new _Option(&apos;alwaysCountVotes&apos;, &apos;always_count_votes&apos;, [
    new _Option(&apos;yes&apos;, true),
    new _Option(&apos;no&apos;, false),
  ]),
  new _Option(&apos;ballotTree&apos;, &apos;ballot_tree&apos;, [
    new _Option(&apos;dynamic&apos;, &apos;dynamic&apos;),
    new _Option(&apos;static&apos;, &apos;static&apos;),
    new _Option(&apos;none&apos;, &apos;none&apos;),
  ]),
]);

/**
 * This is a data object that provides various constants that are used
 * across multiple modules.
 * Some of its values are as if the following initializations had been made:
 * 
 * ~~~
 * K.Decimal = Decimal9; // the Decimal9 class
 * K.VERSION_NUMBERS = [ 0, 9, 1 ];
 * K.VERSION_STRING = &apos;0.9.1&apos;;
 * K.ZERO = new Decimal9(0);
 * K.ONE = new Decimal9(1);
 * K.ULP = new Decimal9(0.000000001); // =  new Decimal9(1, -9);
 * K.MIN_RANKINGS_SUPPORTED = 3,
 * K.RANKING_CODE = { undervote: &apos;&apos;, overvote: &apos;#&apos; },
 * K.RANKING_CODES_NOT_A_CANDIDATE = Set {[&apos;&apos;, &apos;#&apos;]},
 * K.LABEL = {
 *   totalCandidateVotes:   &apos;:Votes for candidates&apos;,
 *   overvotes:   &apos;:Overvotes&apos;,
 *   abstentions:   &apos;:Abstentions&apos;,
 *   otherExhausted:   &apos;:Other exhausted&apos;,
 *   totalVotes:   &apos;:Total votes&apos;,
 *   protectedQuota:   &apos;:Protected quota&apos;,
 *   quotaVotes:   &apos;:Quota votes&apos;,
 *   quota:   &apos;:Quota&apos;,
 *   totalSurplus:   &apos;:Total surplus&apos;,
 *   nbrIterations:   &apos;:Iterations&apos;
 * };
 * K.OTHER_LABELS_LIST = [
 *      &apos;:Votes for candidates&apos;,
 *      &apos;:Overvotes&apos;,
 *      &apos;:Abstentions&apos;,
 *      &apos;:Other exhausted&apos;,
 *      &apos;:Total votes&apos;,
 *      &apos;:Protected quota&apos;,
 *      &apos;:Quota votes&apos;,
 *      &apos;:Quota&apos;,
 *      &apos;:Total surplus&apos;,
 *      &apos;:Iterations&apos;
 * ];
 * K.OPTIONS = {};
 * K.OPTIONS._value_set = Set {[
 *         &apos;alternative_defeats&apos;,
 *         &apos;type_of_altdefs&apos;,
 *         &apos;always_count_votes&apos;,
 *         &apos;ballot_tree&apos;
 *         ]},
 * K.OPTIONS.alternativeDefeats = {
 *   _value = &apos;alternative_defeats&apos;,
 *   yes: &apos;Y&apos;,
 *   never: &apos;N&apos;,
 * };
 * K.OPTIONS.typeOfAltDefs = {
 *   _value: &apos;type_of_altdefs&apos;,
 *   perRefRule: &apos;per_reference_rule&apos;,
 *   beforeSingleDefeats: &apos;before_single_defeats&apos;,
 *   ifNoNewElecteds: &apos;if_no_new_electeds&apos;,
 * };
 * K.OPTIONS.alwaysCountVotes = {
 *   _value: &apos;always_count_votes&apos;,
 *   yes: true,
 *   &apos;no&apos;: false,
 * };
 * K.OPTIONS.ballotTree = {
 *   _value: &apos;ballot_tree&apos;,
 *   &apos;dynamic&apos;: &apos;dynamic&apos;,
 *   &apos;static&apos;: &apos;static&apos;,
 *   &apos;none&apos;: &apos;none&apos;,
 * };
 * K.STATUS = {
 *   hopeful: &apos;hopeful&apos;,
 *   defeated: &apos;defeated&apos;,
 *   elected: &apos;elected&apos;
 * };
 * K.DESTINY = {
 *   normal: &apos;normal&apos;,
 *   excluded: &apos;excluded&apos;,
 *   &apos;protected&apos;: &apos;protected&apos;
 * };
 * K.ROUND = {
 *   away: &apos;away&apos;,
 *   truncate: &apos;truncate&apos;,
 *   nearest: &apos;nearest&apos;
 * };
 *~~~
 */
const K = Object.freeze({
  Decimal: Decimal9,
  /** @type {array&lt;number&gt;} Major, minor, patch version numbers
   * using semantic versioning */
  VERSION_NUMBERS: _versionNumbers,
  /** @type {string} Major, minor, patch version numbers separated by periods
   * based on semantic versioning */
  VERSION_STRING: _versionString,
  ZERO: Object.freeze(new Decimal9(0)),
  ONE: Object.freeze(new Decimal9(1)),
  ULP: Object.freeze(Decimal9.ulp()),
  MIN_RANKINGS_SUPPORTED: 3,
  RANKING_CODE: _ranking_code,
  RANKING_CODES_NOT_A_CANDIDATE: Object.freeze(new Set(
        [_ranking_code.undervote, _ranking_code.overvote])),
  LABEL: _label,
  OTHER_LABELS_LIST: Object.freeze([
    _label.totalCandidateVotes, _label.overvotes, _label.abstentions,
    _label.otherExhausted, _label.totalVotes,
    _label.protectedQuota, _label.quotaVotes, _label.quota,
    _label.totalSurplus, _label.nbrIterations
  ]),
  OPTIONS: _options,
  STATUS: Object.freeze({
    hopeful: &apos;hopeful&apos;,
    defeated: &apos;defeated&apos;,
    elected: &apos;elected&apos;,
  }),
  DESTINY: Object.freeze({
    normal: &apos;normal&apos;,
    excluded: &apos;excluded&apos;,
    protected: &apos;protected&apos;,
  }),
  ROUND: Object.freeze({
    away: &apos;away&apos;,
    truncate: &apos;truncate&apos;,
    nearest: &apos;nearest&apos;,
  }),
});

export default K;

</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
